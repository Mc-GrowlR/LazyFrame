
# 1. 要符合 xml 格式规定

我们在上传文件到系统后台后，系统会自动检查，上传的文件是否份 xml 语法，如果检查到出错，还会显示出错原因和文件位置。

常见错误：
1.  文件第一行不是 xml 声明
2. 文档中含有特殊字符

## 1.1 文件第一行不是 xml 声明

XML 文档第一行以 XML 声明开始，用来表述文档的一些信息，如：
``` xml
<?xml version="1.0" encoding="GBK"?>
```

若发现此错误时建议在文件首位置加上此句。

若已有了，就检查一下这句代码前面是否有空格。因为 xml 文档规定是不能有空格的，这点要注意。

这句 xml说明中已经预定到了本文档的格式：`GBK`，我们在使用中也要使用 `GBK` 编码的文档，以防出错。

## 1 .2 文档中含有特殊字符

有时候也会报莫名其妙的错误，并在错误提示中指出了错误的具体位置。然而到了位置一看，却是最平常的 `<` 和 `>` 号，这到底错在了那里呢？

原来这些符号在 xml 文件中有着特殊的含义，不能用于字符串当中，就算是被 `""` 两个双引号包着也不行，那要怎么样使用呢？

使用转义字符，也称字符实体：

| 转义字符     | 符号  | 名称  |
| -------- | --- | --- |
| `&amp;`  | &   | 和号  |
| `&lt;`   | <   | 小于  |
| `&gt;`   | >   | 大于  |
| `&apos;` | '   | 省略号 |
| `&quot;` | "   | 引号  |

出现此类错误后，要依据报错位置一一改正，也可以使用 xml 转义工具进行转义。

# 2 要符合引擎后台规定

1. 道具模板 `Id` 和道具索引名 `KeyName` 不能重复
2. 道具名字 `Name` 和 `KeyName` 索引名不能有敏感词
3. 在上传后的道具表格保存到服务器之后，点击在游戏中加载生效出错

如果发生不合引擎规定的情况，导入是不会成功的。即不会新添加表项。

## 2.1 道具模板 `Id` 和道具索引名 `KeyName` 不能重复

引擎后台相关的规定是在 xml 文件格式检查之后进行的，到了这一步就是说明 xml 格式无误了。

有时候会报这两项重复了，直接改正即可。要注意这两项的唯一性。

## 2 .2 道具名字 `Name` 和 `KeyName` 索引名不能有敏感词

怎么说呢，这得到上传了之后，才能知道他的敏感词是什么，不过有好的一点是他会报出触发的敏感词和敏感词的数量：
![[附件/企业微信截图_17220655516779.png]]

在修改的时候要注意，道具名字和道具索引名都不能含有敏感词，只改一项是不行的，可以使用正则搜索快速查找：

``` 
(Name="([^\x00-\xff])*)(道士)
(KeyName="([^\x00-\xff])*)(道士)
```

## 2.3 在游戏中加载生效出错

游戏服务器没有启动。